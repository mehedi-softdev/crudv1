let resetPopupWindow=()=>{$(".message").css("visibility","hidden"),$(".message").css("left","-100%")},showPopupMsg=(e,t)=>{$("#msg").text(e),$(".message").addClass(`alert-${t}`),$(".message").css("visibility","visible"),$(".message").css("left","0px"),setInterval(resetPopupWindow,1e3)},employeeListTemplate=(e,t)=>{return`\n    <tr>\n        <th scope="row"> ${t} </th>\n        <td> ${e.emp_name} </td>\n        <td> ${e.emp_salary} </td>\n\n        <td>\n            <a href="javascript:void(0)" onclick="updateEmployee(${e.emp_id})">\n                <i class="fas fa-edit" id="emp_update"></i>\n            </a>\n        </td>\n        <td>\n            <a href="javascript:void(0);" id="delete_emp" onclick="return deleteEmployee(${e.emp_id})">\n                <i class="fas fa-trash" id="emp_delete"></i>\n            </a>\n        </td>\n    </tr>\n    `},getEmpRecords=()=>{$.ajax({url:"/emp/fetch/",type:"GET",success:e=>{let t=e.employees.length;$(".emp-list table tbody").html("");for(let a=0;a<t;a++){let t=e.employees[a],s=employeeListTemplate(t,sn=a+1),l=$(".emp-list table tbody").html();l+=s,$(".emp-list table tbody").html(l)}}})},validateForm=e=>{e.preventDefault();let t=$('input[name="emp_name"]').val(),a=$('input[name="emp_salary"]').val();return""===t&&""===a?(showPopupMsg(msg="Please insert data first!",alert_type="danger"),!1):t.length<1?(showPopupMsg(msg="Please enter Employee Name",alert_type="info"),!1):!(a.length<1)||(showPopupMsg(msg="Please enter Employee Salary",alert_type="info"),!1)},addEmployee=e=>{if(e.preventDefault(),!validateForm(e))throw new Error("Invalid");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:"/emp/add",type:"POST",data:$('form[name="emp_add_form"]').serialize(),success:e=>{showPopupMsg(msg=`${$("#id_emp_name").val()} successfully added to the list!`,alert_type="success"),$("#id_emp_name").val(""),$("#id_emp_salary").val(""),getEmpRecords()},error:e=>{showPopupMsg("Can't add the user! Unknown Error occure!",alert_type="danger")}})},deleteEmployee=e=>{$.ajax({url:`/emp/delete/${e}`,type:"GET",success:e=>{showPopupMsg(msg="User has been successfully deleted!",alert_type="info"),getEmpRecords()},error:e=>{alert(" Can't delete the user! ")}})},updateTemplateForm=e=>{let t=`\n        <form action="#" name="emp_update_form" method="POST" class="row g-2">\n            <div class="col-12 mb-3 text-end p-1">\n                <h1 class="badge bg-success text-white text-center">Employee Update Form</h1>\n            </div>\n            <div class="col-12 mb-3">\n                <label for="id_emp_name" class="form-label">Update Employee Name</label>\n                <input type="text" class="form-control" id="id_emp_name"  name="emp_name"\n                    value="${e.emp_name}">\n            </div>\n            <div class="col-12 mb-3">\n                <label for="id_emp_salary" class="form-label">Update Employee Salary</label>\n                <input type="number" class="form-control" id="id_emp_salary"  min="0" name="emp_salary"\n                    value="${e.emp_salary}">\n            </div>\n            <div class="col-12 mb-3 text-end text-lg-start">\n                <button type="submit" class="btn btn-outline-primary">Update </button>\n            </div>\n        </form>\n    `;$(".form").html(t)},updateEmp=e=>{e.preventDefault(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:`/emp/update/${e.data.emp.emp_id}`,type:"POST",data:$('form[name="emp_update_form"]').serialize(),success:e=>{showPopupMsg(msg="User updated successfully!",alert_type="success"),getEmpRecords(),empAddForm()},error:e=>{alert("Following error occured! ")}})},updateEmployee=e=>{$.ajax({url:`/emp/fetch/${e}`,type:"GET",success:e=>{let t=e.employee;updateTemplateForm(t),$('form[name="emp_update_form"]').submit({emp:t},updateEmp)},error:e=>{alert(" Error! to update user!")}})},empAddForm=()=>{$(".form").html('\n        <form action="#" onsubmit="addEmployee(event)" name="emp_add_form" method="POST" class="row g-2">\n            \n            <div class="col-12 mb-3 text-end p-1">\n                <h1 class="badge bg-success text-white text-center">Employee Add Form</h1>\n            </div>\n            <div class="col-12 mb-3">\n                <label for="id_emp_name" class="form-label">Employee Name</label>\n                <input type="text" class="form-control" id="id_emp_name"  name="emp_name"\n                    placeholder="ex. Jhon Smith">\n            </div>\n            <div class="col-12 mb-3">\n                <label for="id_emp_salary" class="form-label">Employee Salary</label>\n                <input type="number" class="form-control" id="id_emp_salary"  min="0" name="emp_salary"\n                    placeholder="ex. 12,0000">\n            </div>\n            <div class="col-12 mb-3 text-end text-lg-start">\n                <button type="submit" class="btn btn-outline-primary">Add <i class="fas fa-plus"></i></button>\n            </div>\n        </form>\n    ')};$(document).ready(()=>{getEmpRecords(),$('form[name="emp_add_form"]').submit(addEmployee)});